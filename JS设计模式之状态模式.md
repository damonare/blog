---
title:  JS设计模式之状态模式
categories:
  - 原创
tags:
  - JavaScript
  - 设计模式
  - 行为型模式
toc: true
comments: true
---

## 前言

> 本文531字，阅读大约需要5分钟。

**总括:** 在Javascript中实现23种经典设计模式的状态模式。

- 公众号：「前端进阶学习」，回复「666」，获取一揽子前端技术书籍

**书读百遍，其义自见**。

<!-- more -->

## 正文

状态模式(State pattern):   **当一个对象的内部状态发生改变时，带来其行为的改变**。

状态模式也是一种优化判断的设计模式，看下下面这种判断逻辑：

```js
function test(state) {
  if (state === 1) {
    // ...
  } else if (state === 2) {
    // ...
  } else if (state === 3) {
    // ...
  }
}
```

类似的状态判断是比较常见的逻辑判断，如此臃肿的代码带来的后果往往是难以维护，难以进行增删改等操作。

通过状态模式进行优化：

```js
function test(state) {
  var states = {
    state1() {
      console.log('第一种情况');
       // ...
    },
    state2() {
       console.log('第二种情况');
       // ...
    }
    state3() {
       console.log('第二种情况');
       // ...
    }
  };
  states['state' + state] && states['state' + state]();
}
```

### 状态模式的优缺点

**优点**：

-   通过定义状态和行为之间的关系，并将它们封装起来(比如以类或是对象的形式)，便于维护且状态切换更为简便；
-   解决臃肿的`if/else`代码，使得每一个分支都独立出来一个状态；
-   避免Context过于臃肿，状态切换的逻辑可以分布在不同的状态类中，也去掉了原本过多的分支判断。

**缺点**：

-   如果状态复杂，我们需要做声明的状态类会非常庞大，导致无法再同一个地方看到整个状态机的逻辑；

以上。

---

能力有限，水平一般，欢迎勘误，不胜感激。

转载请获本人授权，并注明作者和出处。

订阅更多文章可关注公众号「前端进阶学习」，回复「666」，获取一揽子前端技术书籍

![前端进阶学习](https://image.damonare.cn/qianduanjinjie.png)